define("sjs/matrix/ad/form/commonspe",["sjs/flash/swfobject","sjs/data/cookie","sjs/matrix/ad/statspe","sjs/matrix/ad/form/config"],function(t,i,e,o){var n=window.document,c=window.navigator,r=(window.location,jQuery),a=(r.extend({FLASH_PLAYER:"http://images.sohu.com/bill/s2013/gates/all/final130402-4.swf",FLASH_COVER:"http://images.sohu.com/bill/default/1x1.gif"},window.passion_config),function(t){this.adObject=t,this.container=r("#"+t.cont_id),this.options=r.extend({},this.options,t.spec)});return a.prototype={init:function(){var t=this.adObject.resource;t.itemspaceid=this.adObject.cont_id,this.insert(),-1!=="image, flash, text, html, iframe".indexOf(t.type)&&this.adObject.trigger("afterload")},attach:function(){},insert:function(t){var i=window.location.href.split("://")[0],e=this.adObject,o=t||e.resource;if(o&&("http"==i?o.file="http://"+o.file.split("://")[1]:"https"==i&&(o.file="https://"+o.file.split("://")[1])),o&&o.type){var n="insert"+o.type.replace(/\s[a-z]/g,function(t){return t.toLocaleUpperCase()}).replace(/^[a-z]/,function(t){return t.toLocaleUpperCase()});o.cont_id||(o.cont_id=this.adObject.cont_id),n in this&&(this[n].call(this,o),e.trigger("afterload_res",o))}},insertImage:function(t){if(t.cont_id)return r("#"+t.cont_id).html('<img src="'+t.file+'" border="0" style = "width:'+t.width+"px; height:"+t.height+'px"/>')},insertMp4:function(t){return r("#"+t.cont_id).html("<video id='video_page' preload='auto' muted width='"+t.width+"' height='"+t.height+"' autoplay='autoplay' loop='loop'><source src='"+t.file+"' />Your browser does not support the video tag.</video>")},insertIframe:function(t){if(t.cont_id)return r("#"+t.cont_id).html('<iframe width="'+t.width+'" height="'+t.height+'" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" src="'+t.file+'"></iframe>')},insertFlash:function(i){if(i.cont_id){var e=i.cont_id+"_flash",o=r.extend({swfVersionStr:"10.1",xiSwfUrlStr:"",flashvarsObj:{},parObj:{wmode:"transparent",allowScriptAccess:"always"},attObj:{wmode:"transparent",allowScriptAccess:"always"}},i);if(o.attObj.data=o.file,o.attObj.id=e,o.attObj.width=o.width,o.attObj.height=o.height,o.parObj.flashvars=o.attObj.flashvars=r.param(o.flashvarsObj),this.adObject.isnot_flashcover)n='<div id="'+e+'" style="width:'+o.width+"px;height:"+o.height+'px;"></div>';else var n='<div style="position:relative;width:'+o.width+"px;height:"+o.height+'px;margin:0 auto;"><div style="position:absolute;z-index:1;width:'+o.width+"px;height:"+o.height+'px;top:0px;left:0px;"><div id="'+e+'"></div></div></div>';return r("#"+o.cont_id).html(n),t&&t.createSWF(o.attObj,o.parObj,e)}},insertText:function(t){if(t.cont_id)return r("#"+t.cont_id).html('<a href="'+t.click+'" target="_blank">'+t.text+"</a>")},insertHtml:function(t){if(t.cont_id)return r("#"+t.cont_id).html(t.html)},insertScript:function(t){var i=this,e=t||this.options;e.is_ready||r.getScript(e.file,function(){if(e.onload)if("function"==typeof e.onload)e.onload.call(i.adObject);else{var o="fun"+(new Date).getTime();window.eval("window."+o+" = "+t.onload),window[o].apply(i.adObject),window[o]=void 0}})},show:function(){this.container.show(),this.container.trigger("aftershow")},hide:function(){this.container.hide(),this.container.trigger("afterhide")},detach:function(){this.container.detach()},loadThirdCode:function(t,i){i=i;var o=this;window.SOHU_AD_PV=function(t){i.cx="",i.cy="",i.x=t.x,i.y=t.y,e.get("pv",i),e.ad_plus_pv(i)},window.SOHU_AD_AV=function(t){i.cx="",i.cy="",i.x=t.x,i.y=t.y,e.get("av",i)},window.SOHU_AD_CUBE=function(t){i.cx=t.cx,i.cy=t.cy,e.get("click",i),o.postAdplus(i)},jQuery.ajax({url:t,dataType:"script",async:!1,success:function(){},error:function(t,i,e){console.info(t.status),console.info(t.readyState),console.info(i)}})},addDivClick:function(){var t=this,i=t.adObject;jQuery("<div id='"+i.cont_id+"_Click'></div>").css({width:i.resource.width,height:i.resource.height,cursor:"pointer",position:"absolute",top:0,"z-index":2}).appendTo(jQuery("#"+i.cont_id)),t.checkIE()&&jQuery("#"+i.cont_id+"_Click").css({"background-color":"red",filter:"alpha(opacity=0)"}),jQuery("#"+i.cont_id+"_Click").bind("click",function(o){t.postAdplus(i),t.adObject.cx=o.clientX,t.adObject.cy=o.clientY,e.get("click",i)})},addDivClick2:function(t,i){var o=this,n=o.adObject;jQuery("<div id='"+n.cont_id+"_Click_"+t+"'></div>").css({width:i.width,height:i.height,cursor:"pointer",position:"absolute",top:0,"z-index":2}).appendTo(jQuery("#"+t)),o.checkIE()&&jQuery("#"+n.cont_id+"_Click_"+t).css({"background-color":"red",filter:"alpha(opacity=0)"}),jQuery("#"+n.cont_id+"_Click_"+t).bind("click",function(t){o.postAdplus(n),o.adObject.cx=t.clientX,o.adObject.cy=t.clientY,e.get("click",n)})},addMonitorkey:function(){jQuery("<div id='"+this.adObject.monitorkey+"' style='display:none;'>").appendTo(jQuery("#"+this.adObject.cont_id))},addCloseButton:function(t){if(t)t=t;else t=this.adObject;jQuery("<div id='"+t.cont_id+"_close'></div>").css({width:"93px",height:"28px",background:"url('http://images.sohu.com/bill/s2015/jscript/lib/sjs/matrix/html/close.png')",position:"absolute","z-index":3,color:"white",right:35,top:"0px",cursor:"pointer"}).appendTo(jQuery("#"+t.cont_id)).bind("click",function(){jQuery("#"+t.cont_id).remove()})},addAdFlag:function(t){if(!n.getElementById("ad-flag_"+t.cont_id)){r("<div id='ad-flag_"+t.cont_id+"'></div>").css({position:"absolute",top:"0px",height:"16px",color:"white",opacity:"0.6",filter:"alpha(opacity=0.6)","z-index":3,cursor:"auto","background-color":"rgb(93, 89, 89)"}).appendTo(r("#"+t.cont_id));t.dsp_source&&this.getRealLength(t.dsp_source)<=4?jQuery("<p>"+t.dsp_source+"|广告</p>").css({padding:"0 0px"}).appendTo(jQuery("#ad-flag_"+t.cont_id)):jQuery("<p>广告</p>").css({padding:"0 0px"}).appendTo(jQuery("#ad-flag_"+t.cont_id)),jQuery("#"+t.cont_id).bind("mouseover",function(){jQuery("#ad-flag_float p").css({color:"white"})}),this.checkIE()&&jQuery("#ad-flag_"+t.cont_id).css({filter:"alpha(opacity=60)"})}},getRealLength:function(t){for(var i=t.length,e=0,o=0,n=0;n<i;n++)charCode=t.charCodeAt(n),charCode>=0&&charCode<=128?o+=1:e+=1,2==o&&(e+=1,o=0);return 0==o?e:e+.5},checkIE:function(){var t,i=c.userAgent.toLowerCase();return!!(i.indexOf("msie")>-1)&&(t=i.match(/msie ([\d.]+)/)[1],parseInt(t)<=parseInt("8.0"))},checkIsIE:function(){return!!(window.ActiveXObject||"ActiveXObject"in window)},check:function(t,e){var o,n=this.adObject.itemspaceid,c=t,r=new Date;if(r.setMinutes(r.getMinutes()+this.options.time_expires),t){var a=i(o=e?"beans_visit_"+n+e:"beans_visit_"+n)||"{}";(a=JSON.parse(a))[n]=a[n]||1;var s=a[n];return a[n]++,i(o,JSON.stringify(a),{path:"/",expires:r}),s<c}return!1},flashChecker:function(){var t=0,i=0;if(n.all){(e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))&&(t=1,VSwf=e.GetVariable("$version"),i=parseInt(VSwf.split(" ")[1].split(",")[0]))}else if(c.plugins&&c.plugins.length>0){var e;if(e=c.plugins["Shockwave Flash"]){t=1;for(var o=e.description.split(" "),r=0;r<o.length;++r)isNaN(parseInt(o[r]))||(i=parseInt(o[r]))}}return{f:t,v:i}},postAdplus:function(t){var i=t.resource.click;if(""!=i){var o=/clk/,n=/imp/,c=i.match(o);if(t.resource.clkm)for(var r=0;r<t.resource.clkm.length;r++)t.resource.clkm[r].match(o)||t.resource.clkm[r].match(n)&&-1==t.resource.clkm[r].indexOf("?")?e.get(t.resource.clkm[r]+"?apid="+t.cont_id+"&impid="+t.impression_id):t.resource.clkm[r].match(o)||t.resource.clkm[r].match(n)&&-1!=t.resource.clkm[r].indexOf("?")?e.get(t.resource.clkm[r]+"&apid="+t.cont_id+"&impid="+t.impression_id):e.get(t.resource.clkm[r]);else if(t.clkm)for(r=0;r<t.clkm[r].length;r++)t.clkm[r].match(o)||t.clkm[r].match(n)&&-1==t.clkm[r].indexOf("?")?e.get(t.clkm[r]+"?apid="+t.cont_id+"&impid="+t.impression_id):t.clkm[r].match(o)||t.clkm[r].match(n)&&-1!=t.clkm[r].indexOf("?")?e.get(t.clkm[r]+"&apid="+t.cont_id+"&impid="+t.impression_id):e.get(t.clkm[r]);if(c){window.open("about:blank").location.href=i+"?apid="+t.cont_id+"&impid="+t.impression_id}else{window.open("about:blank").location.href=i}}}},a.create=function(t){var i=this;if("init"in(t=t||{})){var e=function(t){return i.call(this,t)};return e.create=a.create,e.prototype=r.extend({},this.prototype,t),e}return function(){window.console&&console.log&&console.log("The new form has no init function; It is not be allowed!")}},a});